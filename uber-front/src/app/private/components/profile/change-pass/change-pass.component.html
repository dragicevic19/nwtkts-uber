<div class="card card-outline-secondary mb-4">
    <div class="card-header">
        Change Password
    </div>
    <div class="card-body">
        <form [formGroup]="changePassForm">
            <div [hidden]="!user.hasPassword" class="form-group">
                <label for="inputPasswordOld">Current Password</label>
                <input formControlName="currentPassword" type="password" class="form-control">
                <small
                    *ngIf="changePassForm.controls['currentPassword'].touched && changePassForm.hasError('required', 'currentPassword')"
                    class="text-danger">*Current password is required</small>
            </div>
            <div class="form-group">
                <label for="inputPasswordNew">New Password</label>
                <input formControlName="password" type="password" class="form-control">
                <span
                    *ngIf="!changePassForm.controls['password'].touched || !changePassForm.controls['password'].invalid"
                    class="form-text small text-muted">
                    The password must be 8-32 characters
                </span>
                <small
                    *ngIf="changePassForm.controls['password'].touched && changePassForm.hasError('required', 'password')"
                    class="text-danger">*Password is required</small>
                <small
                    *ngIf="changePassForm.controls['password'].touched && changePassForm.hasError('minlength', 'password')"
                    class="text-danger">*Password must be at least 8 characters long</small>
                <small
                    *ngIf="changePassForm.controls['password'].touched && changePassForm.hasError('maxlength', 'password')"
                    class="text-danger">*Maximum number of characters is 32</small>
            </div>
            <div class="form-group">
                <label for="inputPasswordNewVerify">Confirm Password</label>
                <input formControlName="repPassword" type="password" class="form-control">
                <span
                    *ngIf="!changePassForm.controls['repPassword'].touched || !changePassForm.controls['repPassword'].invalid && !changePassForm.errors?.['passwordMismatchError']"
                    class="form-text small text-muted">
                    To confirm, type the new password again.
                </span>
                <small
                    *ngIf="changePassForm.controls['repPassword'].touched && changePassForm.hasError('required', 'repPassword')"
                    class="text-danger">*Confirm password is required</small>
                <small
                    *ngIf="changePassForm.errors?.['passwordMismatchError'] && changePassForm.controls['repPassword'].touched && !changePassForm.hasError('required','repPassword')"
                    class="text-danger">*Passwords do not match</small>

            </div>
            <div style="display: flex; justify-content: space-between; gap: 20px;">
                <button class="btn btn-secondary btn-block mt-4 w-50"
                    (click)="onBack()">Back</button>
                <button type="submit" [disabled]="changePassForm.invalid" class="btn btn-primary btn-block mt-4 w-50"
                    (click)="onSubmit()">Save</button>
            </div>
        </form>
    </div>
</div>